<?xml version="1.0" encoding="utf-8"?>
<Defs>

  <DutyDef>
    <defName>NAT_RustDefend</defName>
    <alwaysShowWeapon>true</alwaysShowWeapon>
    <thinkNode Class="ThinkNode_Priority">
      <!-- Todo here - if outside of duty radius, go to within duty radius-->
      <!-- Currently this is handled by a hack in JobGiver_AIFightBase-->
      <subNodes>
        
        <li Class="JobGiver_ManTurretsNearPoint">
          <maxDistFromPoint>25</maxDistFromPoint>
        </li>
        <li Class="JobGiver_AIDefendPoint">
          <targetAcquireRadius>65</targetAcquireRadius>
          <targetKeepRadius>72</targetKeepRadius>
        </li>
        <li Class="JobGiver_FightFiresNearPoint">
          <maxDistFromPoint>25</maxDistFromPoint>
        </li>
        <li Class="ThinkNode_ForbidOutsideFlagRadius">
          <maxDistToSquadFlag>16</maxDistToSquadFlag>
          <subNodes>
            <li Class="ThinkNode_Subtree">
              <treeDef>SatisfyBasicNeedsAndWork</treeDef>
            </li>
          </subNodes>
        </li>
        <li Class="JobGiver_WanderNearDutyLocation">
          <wanderRadius>20</wanderRadius>
          <locomotionUrgencyOutsideRadius>Sprint</locomotionUrgencyOutsideRadius>
        </li>
      </subNodes>
    </thinkNode>
  </DutyDef>

  <DutyDef>
    <defName>NAT_SerpentAssault</defName>
    <thinkNode Class="ThinkNode_Priority">
      <subNodes>
        <!-- Use bile spit -->
        <li Class="JobGiver_AIAbilityFight">
          <targetAcquireRadius>65</targetAcquireRadius>
          <targetKeepRadius>72</targetKeepRadius>
          <ability>NAT_BileSpit</ability>
        </li>
        <!-- Regular fight -->
        <li Class="JobGiver_AIFightEnemies">
          <targetAcquireRadius>65</targetAcquireRadius>
          <targetKeepRadius>72</targetKeepRadius>
          <allowTurrets>true</allowTurrets>
        </li>
        <li Class="JobGiver_AITrashColonyClose" />
        <li Class="JobGiver_AITrashBuildingsDistant" />
        <li Class="JobGiver_AIGotoNearestHostile" />
        <li Class="JobGiver_AITrashBuildingsDistant">
          <attackAllInert>true</attackAllInert>
        </li>
      </subNodes>
    </thinkNode>
  </DutyDef>

  <DutyDef>
    <defName>NAT_RustAssaultColony</defName>
    <alwaysShowWeapon>true</alwaysShowWeapon>
    <thinkNode Class="ThinkNode_Priority">
      <subNodes>
        <li Class="JobGiver_TakeCombatEnhancingDrug" />
        <li Class="ThinkNode_Subtree">
          <treeDef>Abilities_Aggressive</treeDef>
        </li>
        <li Class="JobGiver_AIFightEnemies">
          <targetAcquireRadius>65</targetAcquireRadius>
          <targetKeepRadius>72</targetKeepRadius>
        </li>
        <!--<li Class="JobGiver_AITrashColonyClose" />
        <li Class="JobGiver_AITrashBuildingsDistant" />-->
        <li Class="JobGiver_AIGotoNearestHostile" />
        <!--<li Class="JobGiver_AITrashBuildingsDistant">
          <attackAllInert>true</attackAllInert>
        </li>-->
        <li Class="JobGiver_AISapper">
          <canMineNonMineables>false</canMineNonMineables>
        </li>
        <li Class="JobGiver_AITrashColonyClose" />
        <li Class="JobGiver_AITrashBuildingsDistant" />
        <li Class="JobGiver_AITrashBuildingsDistant">
          <attackAllInert>true</attackAllInert>
        </li>
      </subNodes>
    </thinkNode>
    <constantThinkNode Class="ThinkNode_ConditionalCanPickupOpportunisticWeapon">
      <subNodes>
        <!-- Try to pick up nearby weapons -->
        <li Class="JobGiver_PickUpOpportunisticWeapon" />
      </subNodes>
    </constantThinkNode>
  </DutyDef>

  <DutyDef>
    <defName>NAT_RustSapper</defName>
    <alwaysShowWeapon>true</alwaysShowWeapon>
    <thinkNode Class="ThinkNode_Priority">
      <subNodes>
        <li Class="JobGiver_TakeCombatEnhancingDrug" />
        <li Class="JobGiver_AIFightEnemies">
          <targetAcquireRadius>12</targetAcquireRadius>
          <targetKeepRadius>15</targetKeepRadius>
          <needLOSToAcquireNonPawnTargets>true</needLOSToAcquireNonPawnTargets>
        </li>
        <li Class="JobGiver_AISapper" />
        <li Class="JobGiver_AIGotoNearestHostile" />
      </subNodes>
    </thinkNode>
  </DutyDef>

  <DutyDef>
    <defName>NAT_RustEscort</defName>
    <alwaysShowWeapon>true</alwaysShowWeapon>
    <thinkNode Class="ThinkNode_Priority">
      <subNodes>
        <li Class="JobGiver_TakeCombatEnhancingDrug">
          <onlyIfInDanger>true</onlyIfInDanger>
        </li>
        <li Class="JobGiver_AIDefendEscortee">
          <targetAcquireRadius>65</targetAcquireRadius>
          <targetKeepRadius>72</targetKeepRadius>
        </li>
        <li Class="JobGiver_AIFollowEscortee"/>
        <li Class="ThinkNode_Subtree">
          <treeDef>SatisfyVeryUrgentNeeds</treeDef>
        </li>
        <li Class="JobGiver_WanderNearDutyLocation">
          <wanderRadius>8</wanderRadius>
        </li>
      </subNodes>
    </thinkNode>
  </DutyDef>

  <DutyDef>
    <defName>NAT_CreateRustForPsychicRitual</defName>
    <thinkNode Class="NAT.JobGiver_CreateRustForPsychicRitual" />
  </DutyDef>

</Defs>